## ğŸ“– ëª©ì°¨

0. [ğŸ¯ ë¯¸ì…˜](#-ë¯¸ì…˜)
1. [ğŸ‘¨â€ğŸ’» ì„¤ê³„ ì˜ë„](#-ì„¤ê³„-ì˜ë„)
2. [ğŸ” ì„œë²„ Flow](#-ì„œë²„-flow)
3. [âœ… ì¤€ë¹„ ì‚¬í•­](#-ì¤€ë¹„-ì‚¬í•­)
4. [ğŸ§ª í…ŒìŠ¤íŠ¸ ìˆœì„œ](#-í…ŒìŠ¤íŠ¸-ìˆœì„œ)
5. [ğŸ§¾ API ëª…ì„¸ì„œ](#-api-ëª…ì„¸ì„œ)
6. [âš™ï¸ ê³µí†µ ì •ë³´](#-ê³µí†µ-ì •ë³´)

---
## ğŸ¯ ë¯¸ì…˜

ğŸš© ì´ë²¤íŠ¸ ë“±ë¡ / ì¡°íšŒ\
â€âœ”ï¸ ìš´ì˜ì, ê´€ë¦¬ìê°€ ì´ë²¤íŠ¸ ìƒì„± ê°€ëŠ¥\
â€âœ”ï¸ ì´ë²¤íŠ¸ì—ëŠ” ì¡°ê±´ê³¼ ê¸°ê°„, ìƒíƒœ ì •ë³´ê°€ í¬í•¨\
â€âœ”ï¸ ë“±ë¡í•œ ì´ë²¤íŠ¸ ëª©ë¡ ë° ìƒì„¸ì¡°íšŒ ê°€ëŠ¥\
ğŸš© ë³´ìƒ ë“±ë¡ / ì¡°íšŒ\
â€âœ”ï¸ ì´ë²¤íŠ¸ì— ë³´ìƒ ì¶”ê°€ ê°€ëŠ¥\
â€â€(ì œ ìƒê°ì—ëŠ” ì´ë¯¸ ì™„ì„±ëœ ì´ë²¤íŠ¸ì— ë³´ìƒì¶”ê°€ëŠ”\
â€â€í˜¼ë€ì„ ì•¼ê¸°í•  ìˆ˜ ìˆì–´, ì´ë²¤íŠ¸ ìƒì„± ì‹œì ì—\
â€â€ì¶”ê°€í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.\
â€âœ”ï¸ ë³´ìƒì€ ììœ ë¡­ê²Œ êµ¬ì„± ê°€ëŠ¥\
â€âœ”ï¸ ê° ë³´ìƒì€ ì–´ë–¤ ì´ë²¤íŠ¸ì— ì—°ê²°ë˜ëŠ”ì§€ê°€ ëª…í™• (ì´ë²¤íŠ¸ ì¡°íšŒì‹œ í™•ì¸ ê°€ëŠ¥)\
ğŸš© ìœ ì € ë³´ìƒ ìš”ì²­\
â€âœ”ï¸ ìœ ì €ëŠ” íŠ¹ì • ì´ë²¤íŠ¸ì— ëŒ€í•´ ë³´ìƒ ìš”ì²­ ê°€ëŠ¥\
â€âœ”ï¸ ì‹œìŠ¤í…œì€ ì¡°ê±´ ì¶©ì¡± ì—¬ë¶€ ê²€ì¦\
â€âœ”ï¸ ì¤‘ë³µ ë³´ìƒ ìš”ì²­ ë§‰ê¸°. ì„±ê³µì‹œ ê¸°ë¡\
ğŸš© ë³´ìƒ ìš”ì²­ ë‚´ì—­ í™•ì¸\
â€âœ”ï¸ ìœ ì €ëŠ” ë³¸ì¸ì˜ ìˆ˜ë ¹ ê¸°ë¡ í™•ì¸ ê°€ëŠ¥\
â€âœ”ï¸ ìš´ì˜ìëŠ” ì „ì²´ ìœ ì €ì˜ ìˆ˜ë ¹ ê¸°ë¡ ì¡°íšŒ ê°€ëŠ¥

## ğŸ‘¨â€ğŸ’» ì„¤ê³„ ì˜ë„

*	`Gateway` â†’ ë‚´ë¶€ ì„œë²„ ìš”ì²­ ì‹œ `Adapter` ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
	* í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë° MSA êµ¬ì¡° í™•ì¥ì— ìœ ë¦¬
	* ê³µí†µ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
	* ë™ì¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ì¼ê´€ì„±ê³¼ ì½”ë“œ ì¬ì‚¬ìš©ì„± í™•ë³´
* `MSA` ì „ë°˜ì— ê±¸ì¹œ ê³µí†µ ì—ëŸ¬ ì½”ë“œ ì‚¬ìš©
	*	ëª¨ë“  ì„œë²„ê°€ ë™ì¼í•œ ì—ëŸ¬ ì½”ë“œë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„
	*	ë””ë²„ê¹…, ë¡œê¹…, ì‚¬ìš©ì ì‘ë‹µ ì²˜ë¦¬ ì¼ê´€ì„± í™•ë³´
	*	ì¶”í›„ ì—ëŸ¬ ì½”ë“œë§Œ ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬í™” ê°€ëŠ¥ â†’ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë¹„ìš© ê°ì†Œ
* `Global Filter`ë¥¼ í†µí•œ ì—ëŸ¬ ì²˜ë¦¬ í†µí•©
	*	ëª¨ë“  ì˜ˆì™¸ë¥¼ ExceptionFilterì—ì„œ í•¸ë“¤ë§
  * User input validator í•¸ë“¤ë§
	*	ApiResultëŠ” ì—ëŸ¬ ì½”ë“œ ë° ë©”ì‹œì§€ë¥¼ ëª¨ì€ enum-like ìƒìˆ˜ ì§‘í•©
	*	`make_api_result` í•¨ìˆ˜ë¥¼ í†µí•´ í†µì¼ëœ ì‘ë‹µ í¬ë§·(result, code, message, data)ì„ ì œê³µ
*	`MongoDB` íŠ¸ëœì­ì…˜ ë¡œì§ ì¶”ìƒí™”
	* MongoDBëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­ ë‹¨ìœ„ ì²˜ë¦¬ì´ì§€ë§Œ, ë³µìˆ˜ ì»¬ë ‰ì…˜ ì¡°ì‘ ë“± ë°ì´í„° ì •í•©ì„±ì´ ì¤‘ìš”í•œ ì‘ì—…ì„ ìœ„í•´ withTransaction() í•¨ìˆ˜ ì œê³µ
	*	íŠ¸ëœì­ì…˜ ì‹œì‘/ì»¤ë°‹/ë¡¤ë°± ë¡œì§ì„ ê³µí†µí™”í•˜ì—¬, ì„œë¹„ìŠ¤ ë¡œì§ì€ ë¹„ì¦ˆë‹ˆìŠ¤ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„

---

## ğŸ” ì„œë²„ Flow

![Image](https://github.com/user-attachments/assets/b981bcae-183f-4764-aef7-5fb76ed0bee5)

---

## âœ… ì¤€ë¹„ ì‚¬í•­

### ğŸ› ï¸ ì†Œí”„íŠ¸ì›¨ì–´

* Docker ì„¤ì¹˜: [https://www.docker.com](https://www.docker.com)

### ğŸš€ ì‹¤í–‰ ì ˆì°¨

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/S05p/nexon_assignment.git
cd nexon_assignment

# âš ï¸ í¬íŠ¸ ì¶©ëŒ ì£¼ì˜
# 27017 í¬íŠ¸ë¡œ ì´ë¯¸ MongoDBê°€ ì‹¤í–‰ ì¤‘ì´ë©´ `docker-compose.yml`ì˜ 46ë²ˆì§¸ ì¤„ í¬íŠ¸ ë³€ê²½ í•„ìš” + docker compose user & event ENV MONGO_URI ì˜ portë„ ë³€ê²½

# ë„ì»¤ ì‹¤í–‰
docker compose up --build
```

### ğŸ” ì„œë¹„ìŠ¤ ì£¼ì†Œ

* Gateway: [http://localhost:3000](http://localhost:3000)
* ë˜ëŠ” Docker Desktop ì•±ì—ì„œ ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìˆœì„œ

> **âš ï¸ í…ŒìŠ¤íŠ¸ëŠ” ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì§„í–‰ ë°”ëë‹ˆë‹¤.**

### ğŸ‘‘ Admin í…ŒìŠ¤íŠ¸

1. [`[POST] /signin` (role: admin)](#1-íšŒì›ê°€ì…) â†’ jwt\_token authorization Bearer tokenì— ì…ë ¥
2. [`[POST] /rewards-admin`](#5-ë³´ìƒ-ìƒì„±-admin) â†’ ë³´ìƒ ìƒì„±
3. [`[GET] /rewards-admin`](#6-ë³´ìƒ-ëª©ë¡-admin) â†’ reward list â†’ ìƒì„±ëœ reward id ì €ì¥
4. [`[POST] /events-admin`](#4-ì´ë²¤íŠ¸-ìƒì„±-admin) â†’ reward id í¬í•¨ ì´ë²¤íŠ¸ ìƒì„±
6. [`[GET] /events` â†’ ì „ì²´ ì´ë²¤íŠ¸ ëª©ë¡ í™•ì¸](#1-ì´ë²¤íŠ¸-ëª©ë¡-ì¡°íšŒ-all) â†’ event id ì €ì¥

### ğŸ™‹â€â™‚ï¸ User í…ŒìŠ¤íŠ¸

1. [`[POST] /signin` (role: user)](#1-íšŒì›ê°€ì…)â†’ jwt\_token authorization Bearer tokenì— ì…ë ¥
2. [`[GET] /events`](#1-ì´ë²¤íŠ¸-ëª©ë¡-ì¡°íšŒ-all) â†’ ì°¸ì—¬ ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ í™•ì¸ (event\_id ì €ì¥) 
3. [`[POST] /users/kill-monster`](#5-ì´ë²¤íŠ¸-ìˆ˜í–‰-user) â†’ ë”ë¯¸ ì´ë²¤íŠ¸ ìˆ˜í–‰ (event ì¡°ê±´ì— ë§ì¶°ì„œ ìˆ˜í–‰)
4. [`[POST] /events/reward-receive`](#4-ë³´ìƒ-ìˆ˜ë ¹-user) â†’ ë³´ìƒ ìˆ˜ë ¹
5. [`[GET] /events/history`](#3-ì°¸ì—¬í•œ-íˆìŠ¤í† ë¦¬-user) â†’ ì—­ëŒ€ ì´ë²¤íŠ¸ ì „ë¶€ ì¶œë ¥ (ë³´ìƒë°›ì•˜ëŠ”ì§€ flag ì „ë‹¬)
6. [`[GET] /users/user-info`](#3-ì‚¬ìš©ì-ì •ë³´-ì¡°íšŒ-user) â†’ ì‚¬ìš©ì ì „ì²´ ì •ë³´ í™•ì¸ (inventoryì—ì„œ user item í™•ì¸)

### ğŸ” Admin ì¬ë¡œê·¸ì¸

* [`[GET] /events-admin/history/{event_id}`]() â†’ í•´ë‹¹ ì´ë²¤íŠ¸ì˜ ë³´ìƒë°›ì€ ìœ ì € í™•ì¸

---

## ğŸ§¾ API ëª…ì„¸ì„œ

### ğŸ‘¤ User API

#### 1. íšŒì›ê°€ì…

```http
POST /signup
```

**Body**:

```json
{
  "user_id": "string",
  "password": "string",
  "email": "string (optional)",
  "role": "user | operator | auditor | admin"
}
```

#### 2. ë¡œê·¸ì¸

```http
POST /login
```

**Body**:

```json
{
  "user_id": "string",
  "password": "string"
}
```

**Response**: jwt_token í¬í•¨

#### 3. ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (User)

```http
GET /user-info
```

#### 4. ì—­í•  ë³€ê²½ (Admin)

```http
PUT /role-change
```

**Body**:

```json
{
  "uid": "string",
  "role": "user | operator | auditor | admin"
}
```

#### 5. ì´ë²¤íŠ¸ ìˆ˜í–‰ (User)

```http
POST /invite-friend    invite_frient_count +1
POST /kill-monster     kill_monster_count  + 99999
POST /login-count-up   login_count         + 5
```

---

### ğŸ‰ Event API

#### 1. ì´ë²¤íŠ¸ ëª©ë¡ ì¡°íšŒ (All)

```http
GET /events
```
| ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°     | íƒ€ì…   | í•„ìˆ˜ ì—¬ë¶€ | ê¸°ë³¸ê°’ | ì„¤ëª…                   |
|--------------|--------|-----------|--------|------------------------|
| `event_name` | string | ì„ íƒ      | ì—†ìŒ   | ì´ë²¤íŠ¸ ì´ë¦„ (ê²€ìƒ‰ìš©)   |
| `start_date` | Date   | ì„ íƒ      | ì—†ìŒ   | ì‹œì‘ì¼ í•„í„°           |
| `end_date`   | Date   | ì„ íƒ      | ì—†ìŒ   | ì¢…ë£Œì¼ í•„í„°           |
| `page`       | number | í•„ìˆ˜      | 1      | í˜ì´ì§€ ë²ˆí˜¸           |
| `limit`      | number | í•„ìˆ˜      | 10     | í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜ (ìµœëŒ€ 100) |

#### 2. ì´ë²¤íŠ¸ ìƒì„¸ ì¡°íšŒ (All)

```http
GET /events/detail/:event_id
```

#### 3. ì°¸ì—¬í•œ íˆìŠ¤í† ë¦¬ (User)

```http
GET /events/history
```

#### 4. ë³´ìƒ ìˆ˜ë ¹ (User)

```http
POST /events/reward-receive
```

**Body**:

```json
{
  "event_id": "string",
  "reward_id": "string"
}
```

---

### ğŸ› ï¸ ê´€ë¦¬ì ì „ìš© API

#### 1. ëª¨ë“  ì´ë²¤íŠ¸ ëª©ë¡ (deactivate, delete) (Admin)

```http
GET /events-admin
```

#### 2. ì´ë²¤íŠ¸ ìƒì„¸ (deactivate, delete) (Admin)

```http
GET /events-admin/detail/:event_id
```

#### 3. ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬ (Admin)

```http
GET /events-admin/history/:event_id
```
| ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°      | íƒ€ì…   | í•„ìˆ˜ ì—¬ë¶€ | ê¸°ë³¸ê°’ | ì„¤ëª…                          |
|---------------|--------|-----------|--------|-------------------------------|
| `uid`         | string | ì„ íƒ      | ì—†ìŒ   | ì‚¬ìš©ì UID (í•„í„° ì¡°ê±´)        |
| `start_date`  | Date   | ì„ íƒ      | ì—†ìŒ   | ì¡°íšŒ ì‹œì‘ì¼                   |
| `end_date`    | Date   | ì„ íƒ      | ì—†ìŒ   | ì¡°íšŒ ì¢…ë£Œì¼                   |
| `page`        | number | í•„ìˆ˜      | 1      | í˜ì´ì§€ ë²ˆí˜¸                   |
| `limit`       | number | í•„ìˆ˜      | 10     | í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜ (ìµœëŒ€ 100)   |

#### 4. ì´ë²¤íŠ¸ ìƒì„± (Admin)

```http
POST /events-admin
```

**Body**:

```json
{
  "name": "string",
  "description": "string",
  "start_date": "ISO date",
  "end_date": "ISO date",
  "reward_array": ["string", "..."], // rewardì˜ id
  "contition_type": "login | invite_friend | kill_monster" ,
  "condition_value": "integer", // bigger then 1
  "is_active": "boolean" // default true,
}
```

#### 5. ë³´ìƒ ìƒì„± (Admin)

```http
POST /rewards-admin
```
```json
{
  "name": "string",
  "description": "string",
  "type": "point | coupon | product",
  "amount": "ISO date", // bigger then 1
}
```

#### 6. ë³´ìƒ ëª©ë¡ (Admin)

```http
GET /rewards-admin
```
| ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°       | íƒ€ì…   | í•„ìˆ˜ ì—¬ë¶€ | ê¸°ë³¸ê°’ | ì„¤ëª…                      |
|----------------|--------|-----------|--------|---------------------------|
| `reward_name`  | string | ì„ íƒ      | ì—†ìŒ   | ë³´ìƒ ì´ë¦„ (ê²€ìƒ‰ìš©)        |
| `page`         | number | í•„ìˆ˜      | 1      | í˜ì´ì§€ ë²ˆí˜¸               |
| `limit`        | number | í•„ìˆ˜      | 10     | í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜ (ìµœëŒ€ 100) |

---

## âš™ï¸ ê³µí†µ ì •ë³´

### ğŸ” ê³µí†µ ì‘ë‹µ í˜•ì‹

**ì„±ê³µ:**

```json
{
  "result": "success",
  "code": "string",
  "message": "string",
  "data": "any | undifiend"
}
```
**ì‹¤íŒ¨:**

```json
{
  "result": "failed", // msaì—ì„œ ì‹¤íŒ¨ì‹œ "msa_failed"
  "code": "string",
  "message": "string",
  "data": "any | undifiend"
}
```

### ğŸ§© ê³µí†µ ì—ëŸ¬ ì½”ë“œ

* `U001`: ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜
* `U002`: ì„¸ì…˜ ë§Œë£Œ
* `U003`: ìœ íš¨í•˜ì§€ ì•Šì€ ì„¸ì…˜
* `U004`: ê¶Œí•œ ì—†ìŒ
* `B001`: ì˜ëª»ëœ ìš”ì²­
* `B002`: ê²½ë¡œ ì—†ìŒ
* `V001`: ì˜ëª»ëœ ê°’ ì „ë‹¬

### ğŸ­ Role Enum

```ts
enum Role {
  USER = 'user',
  OPERATOR = 'operator',
  AUDITOR = 'auditor',
  ADMIN = 'admin'
}
```

### ğŸ­ Condition Enum

```ts
export enum ConditionType {
    LOGIN = 'login',
    INVITE_FRIEND = 'invite_friend',
    KILL_MONSTER = 'kill_monster',
}
```

### ğŸ­ Reward Enum
```ts
export enum RewardType {
    POINT = 'point',
    COUPON = 'coupon',
    PRODUCT = 'product',
}
```
